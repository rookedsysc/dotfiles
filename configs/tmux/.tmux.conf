# 가로로 pane 나눌 때 현재 경로 유지
bind % split-window -h -c "#{pane_current_path}"

# 세로로 pane 나눌 때 현재 경로 유지
bind '"' split-window -v -c "#{pane_current_path}"

# 마우스 모드 활성화 (스크롤, 클릭으로 pane/window 포커스 이동 등)
set -g mouse on

# 가장 최근 활동한 클라이언트 크기에 맞춰 윈도우 자동 리사이즈
set -g window-size latest

# 마우스 드래그 후 자동으로 copy mode 종료되지 않도록 설정
unbind -T copy-mode MouseDragEnd1Pane
unbind -T copy-mode-vi MouseDragEnd1Pane

# 마우스 휠 스크롤 커스터마이징
# alternate screen이 아닐 때만 copy mode 진입
bind -n WheelUpPane if -Ft= "#{||:#{pane_in_mode},#{mouse_any_flag}}" "send -M" "copy-mode -e"

# ===== 플러그인 =====

# TPM (Tmux Plugin Manager)
set -g @plugin 'tmux-plugins/tpm'

# tmux-resurrect: 세션 저장/복원 (prefix + Ctrl-s 저장, prefix + Ctrl-r 복원)
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @resurrect-capture-pane-contents 'on'

# tmux-continuum: 자동 저장(15분 간격) + tmux 시작 시 자동 복원
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @continuum-restore 'on'

# TPM 초기화 (반드시 .tmux.conf 맨 아래에 위치)
run '~/.tmux/plugins/tpm/tpm'
